# 小窗浏览器 🖥️

![Version](https://img.shields.io/badge/version-1.1.0-blue.svg)
![Platform](https://img.shields.io/badge/platform-Windows%2010%2F11-lightgrey.svg)
![License](https://img.shields.io/badge/license-AGPL%20v3-red.svg)
![Tech](https://img.shields.io/badge/tech-WebView2%20%7C%20Win32%20API-orange.svg)

> **专为游戏玩家打造的沉浸式“画中画”副屏浏览器。**
> *Developed for Gamers, by Gamers.*

**小窗 (LiteBrowser)** 是一款基于 Microsoft WebView2 内核开发的超轻量级 Windows 浏览器。它解决了全屏/无边框游戏玩家在挂机、跑图时观看视频的痛点，提供了**鼠标穿透**、**智能热键**、**沉浸式挂机**等独家功能，完美兼容《原神》、《崩坏：星穹铁道》等各类游戏及其自动化脚本工具。

---

## ✨ 核心特性 (v1.0)

### 🎮 极致沉浸体验
* **视觉/点击双穿透**：开启沉浸模式后，窗口背景透明（挖孔），鼠标点击可直接穿透浏览器作用于底层游戏。既能看视频，又不影响游戏操作。
* **智能边缘吸附**：
    * **贴顶吸附**：如果窗口靠近屏幕顶部，切换沉浸模式时会自动上移消除标题栏空隙，实现无缝贴边。
    * **悬浮定位**：如果窗口悬浮在屏幕中间，切换模式时会自动调整坐标，确保网页内容在视觉上**纹丝不动**。
* **零干扰 UI**：沉浸模式下隐藏地址栏、标签页和所有按钮，只保留纯净的网页画面，且**无黑边、无缩放**。

### ⌨️ 智能全局热键
* **输入状态自动避让**：独创的光标检测算法。当您在网页输入框打字（光标变为 `I` 型）或选中地址栏时，**全局热键自动失效**，绝不干扰正常输入。停止打字后热键秒级恢复。
* **老板键 (Boss Key)**：一键隐藏/呼出窗口，并支持**隐藏时自动暂停视频**（可配置），瞬间释放系统资源。
* **全自动提权**：启动时自动申请管理员权限，确保热键在反作弊系统（如 Ace, mhyprot）运行的高权限游戏下依然可用。

### 📑 现代化标签页系统
* **完整会话恢复**：意外关闭或重启软件后，自动恢复所有已打开的标签页（包括 URL 和标题）以及当前浏览进度。
* **自绘 UI 引擎**：重写底层绘制逻辑，无论网页标题多长，**关闭按钮 (×)** 始终固定在标签页最右侧，拒绝误触。
* **自定义主页**：支持设置默认启动页（如 B站、直播间），新建标签页时自动打开。

---

## 🛠️ 快捷键指南

| 按键 | 功能 | 说明 |
| :--- | :--- | :--- |
| **0** | **沉浸模式开关** | 切换 普通/穿透 模式，隐藏所有 UI |
| **9** | **老板键** | 彻底隐藏/显示窗口 (支持自动暂停) |
| **`** (波浪号) | 播放/暂停 | 全局控制视频播放状态 |
| **5** / **6** | 后退 / 快进 | 视频进度控制 (±5秒) |
| **7** / **8** | 上一集 / 下一集 | B站/合集视频快速切换 |

> *注：所有热键均可在软件顶部的“设置”中自定义，支持组合键。*

---

## 🚀 下载与安装

1.  进入 [Releases](../../releases) 页面下载最新版本的压缩包。
2.  解压到任意文件夹。
3.  确保文件夹内包含 `XiaoChuang.exe` 和 `WebView2Loader.dll`。
4.  **运行**：双击 `XiaoChuang.exe` 即可使用。
    * *首次运行如果提示缺少组件，请下载安装 [Microsoft Edge WebView2 Runtime](https://developer.microsoft.com/microsoft-edge/webview2/)*。

---

## ⚙️ 高级配置

软件会自动在同目录下生成 `config.ini`，您可以直接在软件内的“设置”面板修改，也可以手动编辑文件：

```ini
[Settings]
HoleRadius=400        ; 沉浸模式下鼠标周围的透明区域半径
SnapThreshold=20      ; 窗口吸附屏幕边缘的灵敏度(像素)
AutoPause=1           ; 1=老板键隐藏时自动暂停视频，0=不暂停
HomeUrl=[https://www.bilibili.com](https://www.bilibili.com)  ; 自定义默认主页/新标签页地址

[Hotkeys]
; 格式：修饰键代码,虚拟键码 (建议通过软件界面设置)
Immersion=0,48        ; '0'
HideWin=0,57          ; '9'
...

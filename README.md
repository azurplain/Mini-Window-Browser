# Mini-Window-Browser (小窗浏览器) v1.2

![Platform](https://img.shields.io/badge/platform-Windows-0078D6) ![Language](https://img.shields.io/badge/language-C%2B%2B%20%2F%20Win32-00599C) ![License](https://img.shields.io/badge/license-MIT-green)

**Mini-Window-Browser** 是一款基于 Microsoft WebView2 技术构建的超轻量级 Windows 浏览器。它专为“单屏多任务”场景设计，拥有独特的**沉浸式挖孔模式**和**场景预设系统**，允许用户在全屏游戏挂机或繁重工作的同时，在屏幕特定区域悬浮观看视频或浏览网页，支持点击穿透和透明背景。

---

## ✨ v1.2 版本新特性

* **🆕 场景预设系统 (Presets)**：
    * 新增独立的预设管理窗口，支持一键保存当前窗口的**位置、大小、挖孔半径、吸附设置、自动暂停开关及当前网址**。
    * 支持创建多个场景（如“左下角-原神挂机”、“右侧-B站竖屏”），并在不同场景间瞬间切换。
    * 内置重名检测与防覆盖机制。
    * 底部新增 **[↺ 还原默认状态]** 按钮，可快速重置窗口布局（不影响书签数据）。
* **🔖 增强型书签 (Bookmarks)**：
    * 全新的独立书签管理窗口，支持鼠标滚轮流畅滚动。
    * 实现了收藏状态（☆/★）与当前网页的实时双向同步。
    * 支持直接在列表中编辑书签标题和网址，或一键删除。
* **🖱️ 交互体验升级**：
    * 优化了窗口焦点管理，预设和书签窗口现在是独立的工具窗口，操作更从容。
    * 修复了关闭最后一个标签页时的逻辑（现在会自动重置回主页而非退出软件，防止误触）。
    * 全线支持鼠标滚轮操作。

---

## 🛠️ 安装与运行

点击release/发行版，下载1.2的正式版本。
https://github.com/azurplain/Mini-Window-Browser/releases

### 1. 环境要求
* **操作系统**: Windows 10 / 11
* **运行环境**: 需要安装 [Microsoft Edge WebView2 Runtime](https://developer.microsoft.com/zh-cn/microsoft-edge/webview2/) (Windows 10/11 系统通常已内置)。

### 2. 文件说明
解压后，请确保以下文件位于同一目录下：
* `XiaoChuang.exe`: 主程序。
* `WebView2Loader.dll`: WebView2 核心组件库。
* `config.ini`: 配置文件（首次运行后自动生成，存储您的预设和书签）。

### 3. 运行建议
⚠️ **强烈建议右键点击程序，选择【以管理员身份运行】。**
> **原因**：如果您在运行全屏游戏（如《原神》、《英雄联盟》等），游戏往往拥有较高的系统权限。如果小窗没有管理员权限，全局快捷键（如老板键、沉浸模式开关）可能会被游戏拦截而失效。

---

## 📖 核心功能指南

### 1. 🕳️ 沉浸模式 (Immersion Mode)
这是本软件的灵魂功能。按下快捷键（默认 `0`）即可开启：
* **视觉穿透**：窗口边框和工具栏瞬间消失，背景变为透明。
* **挖孔视窗**：屏幕上只会显示一个跟随鼠标移动的圆形区域（“挖孔”），显示网页内容，其余部分完全透明。
* **操作穿透**：鼠标点击透明区域（圆孔以外的部分）会直接穿透浏览器，作用于底层的游戏或桌面。这意味着您可以隔着浏览器操作游戏角色，互不干扰。
* *提示：挖孔半径可在“设置”中调整。*

### 2. 💾 场景预设 (Presets)
点击工具栏上的 **[预设]** 按钮打开管理面板：
* **新建**: 调整好窗口状态后，点击顶部的 `[+ 新建预设]`，输入名称保存。
* **应用**: 点击预设左侧的 `➜` 箭头，窗口瞬间恢复到该预设保存的状态。
* **管理**: 直接点击预设名称可重命名，点击右侧 `🗑` 图标删除。
* **还原**: 点击底部的 `[↺ 还原默认状态]` 可重置窗口为初始状态。

### 3. 📑 标签与书签
* **标签页**: 点击 `+` 新建，点击 `-` 关闭。关闭最后一个标签页时会自动跳转回主页。
* **书签**: 
    * 点击地址栏左侧的 `☆` / `★` 快速收藏/取消收藏。
    * 点击 `⌵` 按钮打开书签列表，可进行跳转、编辑或删除操作。

### 4. ⌨️ 快捷键操作
*(注意：当光标在输入框内打字时，为防止误触，热键会自动失效)*

| 功能 | 默认按键 | 说明 |
| :--- | :---: | :--- |
| **沉浸模式开关** | `0` | 开启/关闭挖孔穿透模式 |
| **老板键** | `9` | 一键隐藏/呼出窗口 |
| **播放/暂停** | `~` | 模拟空格键控制视频播放 |
| **快退 5秒** | `5` | 视频后退 |
| **快进 5秒** | `6` | 视频快进 |
| **上一集** | `7` | 尝试点击 B站上一集按钮 |
| **下一集** | `8` | 尝试点击 B站下一集按钮 |

---

## ⚙️ 高级设置
点击工具栏上的 **[设置]** 按钮：
* **挖孔半径**: 调整沉浸模式下可视区域的大小。
* **吸附距离**: 窗口靠近屏幕边缘自动吸附的灵敏度。
* **自动暂停**: 开启后，使用老板键隐藏窗口时，视频会自动暂停（节省后台资源）。
* **默认主页**: 修改新建标签页时打开的网址。

---

## ❓ 常见问题 (FAQ)

Q1: 为什么按热键没反应？
A: 
  1. 检查是否正在输入文字，输入状态下热键会被屏蔽。
  2. 检查是否开启了大写锁定或输入法冲突。
  3. 最常见原因：权限不足。请务必【以管理员身份运行】本软件，否则全屏游戏会拦截按键。

Q2: 关闭最后一个标签页为什么软件没退出？
A: 这是为了防止误触。当只剩一个标签页时，点击关闭按钮会触发“重置逻辑”：停止加载、回到默认主页并恢复标题。如需退出程序，请点击窗口最右侧的 [×] 按钮。

Q3: 预设会保存我的书签吗？
A: 不会。预设 (Presets) 仅保存当前的“窗口状态参数”。书签 (Bookmarks) 是独立存储的全局数据，所有预设共享同一份书签。

Q4: 视频快进/快退功能对所有网站有效吗？
A: 该功能通过注入 JavaScript 模拟按键实现。它对大多数标准 HTML5 播放器有效，并针对 Bilibili 进行了特别优化。对于部分使用非标准播放器的网站可能无效。

Q5: 如何备份我的数据？
A: 所有的设置、书签和预设都保存在程序同目录下的 `config.ini` 文件中。您只需备份这个文件即可保留所有数据。

Q6: 吸附屏幕边缘后怎么拉开？
A: 按住 Ctrl 键拖动，或者在设置里调小“吸附距离”。



---

**享受您的高效多任务体验！** 🚀
